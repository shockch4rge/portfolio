---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";

interface Props {
	src: ImageMetadata;
	alt: string;
}

const { src, alt } = Astro.props;
---

<>
	<dialog
		id="modal"
		open={false}
		class="h-fit bg-black fixed max-w-6xl backdrop:bg-black/50 backdrop:backdrop-blur-lg rounded-md ring-0 ring-offset-8 ring-offset-gray-900"
	>
		<Image id="enlarged" class="m-0" src={src} alt={alt} />
		<button class="absolute right-4 top-4 aspect-square grid place-items-center bg-gray-400/40 rounded-xs">
			<i class="ph ph-x text-2xl text-slate-500"></i>
		</button>
	</dialog>
	<Image
		id="preview"
		priority
		class="min-w-[calc(100%+4rem)] sm:min-w-[calc(100%+6rem)] lg:min-w-[calc(100%+4rem)] -ml-8 block mt-8 mb-12 frame-border cursor-pointer"
		src={src}
		alt={alt}
	/>
</>

<script>
	const modal = document.querySelector("dialog")!;
	const image = document.getElementById("preview")!;

	image.addEventListener("click", () => modal.showModal());
	modal.addEventListener("click", () => modal.close());
</script>
